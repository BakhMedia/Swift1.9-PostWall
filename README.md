# PostWall
### –£—Ä–æ–∫ 9.

–í –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —É—Ä–æ–∫–∞—Ö –º—ã —Å –≤–∞–º–∏ –º–Ω–æ–≥–æ –∑–∞–Ω–∏–º–∞–ª–∏—Å—å –≤–∏–∑—É–∞–ª—å–Ω–æ–π —á–∞—Å—Ç—å—é, –∞ —Å–µ–≥–æ–¥–Ω—è –º—ã —Å–æ–∑–¥–∞–¥–∏–º –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π —ç–∫—Ä–∞–Ω, –Ω–æ –Ω–∞–ø–∏—à–µ–º –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ –∫–æ–¥–∞, —Ç–∞–∫ –∫–∞–∫ –Ω–∞—Å—Ç–∞–ª–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç. –í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã —Å –≤–∞–º–∏ –¥–æ–±–∞–≤–∏–º 2 –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ –∫ –Ω–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É, –ø–æ—Å–º–æ—Ç—Ä–∏–º —á—Ç–æ —Ç–∞–∫–æ–µ **Notification** (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏) –∏ –ø—Ä–∏–º–µ–Ω–∏–º —Ö–∏—Ç—Ä–æ—Å—Ç—å —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π. –ü–æ–≥–Ω–∞–ª–∏!


–ü–µ—Ä–µ–π–¥–µ–º –∫ —ç–∫—Ä–∞–Ω—É —á–∞—Ç. –£–¥–∞–ª–∏–º –Ω–∞—à–µ –Ω–∞–¥–ø–∏—Å—å-–∑–∞–≥–ª—É—à–∫—É. –ò —Ä–∞–∑–º–µ—Å—Ç–∏–º **Navigation bar** –∫–∞–∫ –∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö, –Ω–∞–ø–∏—à–µ–º –≤ –Ω—ë–º –ß–∞—Ç. –Ω–µ –∑–∞–±—É–¥–µ–º –ø–æ–º–µ–Ω—è—Ç—å –±–µ–ª—ã–π —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ —Ç–∞–∫ —á—Ç–æ–± –æ–Ω —Å–æ–≤–ø–∞–¥–∞–ª —Å –Ω–∞—à–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º. –ó–∞–¥–∞–¥–∏–º –∫–æ–Ω—Å—Ç—Ä–µ–π—Ç—ã –Ω–∞—à–µ–º—É –∑–∞–≥–æ–ª–æ–≤–∫—É: —Å–≤–µ—Ä—Ö—É, —Å–ª–µ–≤–∞ –∏ —Å–ø—Ä–∞–≤–∞ 0. –î–∞–ª–µ–µ —É–∂–µ –ø—Ä–æ—Å—Ç—ã–µ –≤–µ—â–∏ –¥–ª—è –Ω–∞—Å.

–†–∞–∑–º–µ—Å—Ç–∏–º **Button** –≤ —Å–∞–º–æ–º –Ω–∏–∂–Ω–µ–º –ø—Ä–∞–≤–æ–º —É–≥–ª—É, –≤—ã—Å—Ç–∞–≤–∏–º –µ–º—É –∫–æ–Ω—Å—Ç—Ä–µ–π—Ç—ã —Å–ø—Ä–∞–≤–∞ 8, —Å–Ω–∏–∑—É —Ç–æ–∂–µ 8. –ê –≤—ã—Å–æ—Ç—É –∏ —à–∏—Ä–∏–Ω—É –ø–æ 32. –£–¥–∞–ª–∏–º –≤–µ—Å—å —Ç–µ–∫—Å—Ç –∏–∑ –Ω–µ–≥–æ, –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ –ø–æ—Å—Ç–∞–≤–∏–º –∑–∞—Ä–∞–Ω–µ–µ –Ω–∞–≥—É–≥–ª–µ–Ω–Ω—É—é –∏–∫–æ–Ω–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–Ω–∞—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è. –ù–∞–π–¥–µ–º –≤ **attributes inspector`e** –ø–æ–ª–µ **Image** –∏ –≤–Ω–µ—Å–µ–º —Ç—É–¥–∞ –∏–º—è –Ω–∞—à–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. 


–†–∞–∑–º–µ—Å—Ç–∏–º –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π **TextView** —Å–ª–µ–≤–∞ –æ—Ç **Button\`a**. –ó–∞–¥–∞–¥–∏–º –∫–æ–Ω—Å—Ç—Ä–µ–π—Ç—ã —Å–ª–µ–≤–∞, —Å–Ω–∏–∑—É –∏ —Å–ø—Ä–∞–≤–∞ 8. –ü–æ –Ω–∞—à–µ–π –∏–¥–µ–µ —Å—é–¥–∞ —É—á–∞—Å—Ç–Ω–∏–∫ –Ω–∞—à–µ–≥–æ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –∫–æ–º–º—å—é–Ω–∏—Ç–∏ –±—É–¥–µ—Ç –≤–ø–∏—Å—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –¢–∞–∫ –∂–µ –≤ **attributes inspector`e** –Ω–∞–π–¥–µ–º —Ä–∞–∑–¥–µ–ª **Scroll View**, –≤ –Ω–µ–º –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –≥–∞–ª–æ—á–∫–∞ **Scrolling Enabled**, –Ω–∞–π—Ç–∏ –∏ —Å–Ω—è—Ç—å! –ú—ã —Ö–æ—Ç–∏–º —á—Ç–æ–± —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Å–∫—Ä–æ–ª–ª–∏–ª–æ—Å—å, –∞ —É–≤–µ–ª–∏—á–∏–≤–∞–ª–æ—Å—å –≤ –≤—ã—Å–æ—Ç—É –∞–≤—Ç–æ–º–∞—Ç–æ–º, —Ç–∞–∫ —á—Ç–æ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –Ω–∞–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∏ –∫ —á–µ–º—É.

–ü–æ–∫–∞ —É –Ω–∞—Å –Ω–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç —Å–∞–º —Ä—É–∫–∞–º–∏ –≤–≤–æ–¥–∏—Ç—å —Å–≤–æ—ë –∏–º—è. –î–æ–±–∞–≤–∏–º **Text Field** –Ω–∞–¥ –Ω–∞—à–∏–º –ø–æ–ª–µ–º –¥–ª—è –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∑–∞–¥–∞–¥–∏–º –µ–º—É —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Å—Ç—Ä–µ–π—Ç—ã: —Å–ª–µ–≤–∞, —Å–ø—Ä–∞–≤–∞ –∏ —Å–Ω–∏–∑—É 8, –¥–∞, —Ç–∞–∫–∏–µ –∂–µ –∫–∞–∫ –∏ –ø—Ä–æ—à–ª–æ–≥–æ, –Ω–æ —É –Ω–∞—Å –ø–æ–ª—É—á–∏–ª–æ—Å—å –ø–æ—à–∏—Ä–µ, —Ç–∞–∫ –∫–∞–∫ –∫–Ω–æ–ø–∫–∞ –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ—Ç 0. –í **attributes inspector`e** –Ω–∞–π–¥–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä **placeholder** –∏ –≤–ø–∏—à–µ–º —Ç—É–¥–∞ —Å–ª–æ–≤–æ ¬´–ò–º—è¬ª. –≠—Ç–æ—Ç —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–∫–∞ –æ–Ω –Ω–µ –Ω–∞—á–Ω–µ—Ç –≤–≤–æ–¥–∏—Ç—å —Ç—É–¥–∞ —á—Ç–æ –ª–∏–±–æ.

–û—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –º—ã –±—É–¥–µ–º –≤—ã–≤–æ–¥–∏—Ç—å –≤—Å–µ –Ω–∞—à–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –≠—Ç—É —Ä–æ–ª—å –Ω–∞ —Å–µ–±—è –≤–æ–∑—å–º—ë—Ç –Ω–∞—à —Å—Ç–∞—Ä—ã–π –∑–Ω–∞–∫–æ–º—ã–π **UITableView**. –†–∞–∑–º–µ—Å—Ç–∏–º –µ–≥–æ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ —ç–∫—Ä–∞–Ω–∞ –∏ –∑–∞–¥–∞–¥–∏–º –µ–º—É –∫–æ–Ω—Å—Ç—Ä–µ–π—Ç—ã –≤–µ—Ä—Ö, –ª–µ–≤–æ, –ø—Ä–∞–≤–æ –∏ –Ω–∏–∑ —Ä–∞–≤–Ω—ã–º–∏ –Ω—É–ª—é. –†–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –Ω–∞—à–µ–≥–æ —á–∞—Ç–∞ –∑–∞–Ω—è—Ç–æ!

–ü—Ä–µ–∂–¥–µ —á–µ–º –≤–∑—è—Ç—å—Å—è –∑–∞ —Å–∞–º —á–∞—Ç, –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞–º —Ñ–∞–π–ª—ã. –°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª **Message.swift**. –í –Ω–µ–º –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç:
``` swift
import UIKit

class Message {

    public var name: String
    public var text: String
    public var creationTime: String

    init(data d: [String:Any]) {
        self.name = d["user_name"] as! String
        self.text = d["text"] as! String

        let secondsSince1970: Int = Int(d["creation_time"] as! String)!
        let creationDate = Date(timeIntervalSince1970: TimeInterval(secondsSince1970))
        let formatter = DateFormatter()
        formatter.dateFormat = "yyyy-MM-dd HH:mm"
        self.creationTime = formatter.string(from: creationDate)
    }

}
```

–≠—Ç–æ—Ç —Ñ–∞–π–ª –ø–æ—Ö–æ–∂ –Ω–∞ —Ñ–∞–π–ª **Feed.swift** –Ω–µ —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–æ, –Ω–æ –∏ —Ñ—É–Ω–∫—Ü–∏—é –æ–Ω –±—É–¥–µ—Ç –Ω–µ—Å—Ç–∏ –ø–æ—Ö–æ–∂—É—é. –ù–∞–ø–æ–º–Ω—é –∫–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é —ç—Ç–∏ —Ñ–∞–π–ª—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç.  –û–Ω–∏ —Å—á–∏—Ç—ã–≤–∞—é—Ç (—Ç–æ –µ—Å—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç) –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—à–µ–¥—à–∏–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ö—Ä–∞–Ω—è—Ç –∏—Ö –≤ —Å–µ–±–µ, —á—Ç–æ–± –Ω–∞–º –±—ã–ª–æ –ª–µ–≥–∫–æ —Å –Ω–∏–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å. –¢–∞–∫ —á—Ç–æ —è —Å–∫–æ–ø–∏—Ä—É—é –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –≤—Å—Ç–∞–≤–ª—é –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª, –ø–æ–º–µ–Ω—è—é –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–µ –Ω—É–∂–Ω–æ–µ —É–¥–∞–ª—é. –¢–∞–∫ –∂–µ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ –Ω–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –≤–∏–¥–µ—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –≥–æ–¥, –º–µ—Å—è—Ü –∏ –¥–µ–Ω—å, –Ω–æ –∏ —á–∞—Å —Å –º–∏–Ω—É—Ç–∞–º–∏ —Ç–æ–∂–µ. –¢–∞–∫ —á—Ç–æ –¥–æ–±–∞–≤–∏–º –≤ —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ –±—É–∫–≤—ã ¬´HH¬ª, –æ–∑–Ω–∞—á–∞—é—â–∏–µ —á–∞—Å—ã –∏ ¬´mm¬ª ‚Äî –º–∏–Ω—É—Ç—ã. –ö–ª–∞—Å—Å **Message** –≥–æ—Ç–æ–≤, –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –∏–º—è –∞–≤—Ç–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏. –ú–∞—Å—Å–∏–≤ —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –º—ã –∏ –±—É–¥–µ–º –ø–æ–ª—É—á–∞—Ç—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.


–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ —è—á–µ–π–∫–∏ –Ω–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã, —Ç–æ –µ—Å—Ç—å —Å–æ–∑–¥–∞–¥–∏–º –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –æ—Ç–¥–µ–ª—å–Ω–æ –≤–∑—è—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ. –°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª **MessageItem.swift**. –î–æ–±–∞–≤–∏–º –≤ –Ω–µ–≥–æ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç:
``` swift
import UIKit

class MessageItem: UITableViewCell {

}
```

–î–∞–ª–µ–µ —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª **View**, —Ç–æ –µ—Å—Ç—å **xib**. –£–¥–∞–ª–∏–º **View** –∏–∑ –Ω–µ–≥–æ –∏ –≤—Å—Ç–∞–≤–∏–º **Table view cell**. –ü–µ—Ä–µ–π–¥–µ–º –≤ **Identity inspector** –∏ –≤ –ø–æ–ª–µ **class** —É–∫–∞–∂–µ–º –Ω–∞—à **MessageItem**. –ú—ã —Å –í–∞–º–∏ —É–∂–µ –ø—Ä–æ–¥–µ–ª—ã–≤–∞–ª–∏ —ç—Ç—É –æ–ø–µ—Ä–∞—Ü–∏—é, –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å –ª–µ–Ω—Ç–æ–π. 

–¢—É—Ç –¥–æ–≤–æ–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ç–∞—è —Ä–∞–±–æ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º –≤–∏–¥–æ–º –∏ –∫–æ–Ω—Å—Ç—Ä–µ–π—Ç–∞–º–∏. –†–∞–∑–º–µ—Å—Ç–∏–º –≤ –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤ –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–æ–ª—å –∞–≤–∞—Ç–∞—Ä–∫–∏, –∞ –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç. –°–ø—Ä–∞–≤–∞ –æ—Ç –Ω–µ–≥–æ —Ä–∞–∑–º–µ—Å—Ç–∏–º **Label**, –¥–ª—è –∏–º–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è. –ï—â–µ –ª–µ–≤–µ–µ —è —Ä–∞–∑–º–µ—Å—Ç–∏–ª **Label** –¥–ª—è –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏, –µ–º—É –∑–∞–¥–∞–¥–∏–º —Å–µ—Ä—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –∏ –ø–æ –≤–∫—É—Å—É —É–º–µ–Ω—å—à–∏–º —à—Ä–∏—Ñ—Ç üòú. –ü–æ–¥ —ç—Ç–∏–º –≤—Å–µ–º –¥–µ–ª–æ–º —Ä–∞–∑–º–µ—Å—Ç–∏–º –≥–ª–∞–≤–Ω—ã–π **Label**, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤ —Å–µ–±–µ —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ê —Ç–µ–ø–µ—Ä—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç **FeedItem**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–¥–∏–º –Ω–∏–∂–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä–µ–π—Ç –¥–ª—è —ç—Ç–æ–≥–æ **Label**. –í –ø—Ä–æ—à–ª–æ–º —É—Ä–æ–∫–µ –º—ã —Ç–∞–∫ –∂–µ –∫—Ä–µ–ø–∏–ª–∏ –Ω–∏–∂–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –≤ **ScrollView**. –ó–∞—á–µ–º –∂–µ –∑–¥–µ—Å—å —Ç–∞–∫ —Å–¥–µ–ª–∞–ª–∏? –ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –º—ã —Å–∫–æ—Ä–æ —Å –≤–∞–º–∏ –¥–æ–±–µ—Ä–µ–º—Å—è –∏ —è –≤—Å—ë –ø–æ—è—Å–Ω—é.

–°–æ–∑–¥–∞–¥–∏–º —Å–≤—è–∑–∏ **MessageItem.xib** –∏ **MessageItem.swift** –≤ **Connections Inspector`e**. –Ø —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–∑–≤–∞–ª **nameLabel**, **dateLabel** –∏ **messageTextLabel**, –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º —Å—Ä–∞–∑—É –ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞ –∫–∞–∫–æ–π —ç–ª–µ–º–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç. –¢–∞–∫ –∂–µ –¥–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å —ç—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç—ã.

``` swift
public func setMessage(m: Message) {
    nameLabel.text = m.name
    dateLabel.text = m.creationTime
    messageTextLabel.text = m.text
}
```

–î–∞–∂–µ –Ω–µ –∑–Ω–∞—é –Ω—É–∂–Ω—ã –ª–∏ –∑–¥–µ—Å—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. –í—Ö–æ–¥—è—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä m —Ç–∏–ø–∞ **Message**, –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–µ –¥–∞–≤–Ω–æ —Å –≤–∞–º–∏ —Å–æ–∑–¥–∞–ª–∏. –ò–∑ –Ω–µ–≥–æ –∑–∞–ø–æ–ª–Ω—è–µ–º –Ω–∞—à–∏ **Label`—ã** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–∑ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞. –í—Ä–æ–¥–µ –≤—Å—ë —Å–æ–≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ.

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–µ–º –≤ —Ñ–∞–π–ª **Main.storyboard**. –í—ã–±–µ—Ä–µ–º –Ω–∞—à —ç–∫—Ä–∞–Ω –ß–∞—Ç. –° –ø–æ–º–æ—â—å—é **Connection Inspector`a** —Å–æ–∑–¥–∞–¥–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—à–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Ñ–∞–π–ª–µ **ChatViewController**: **tableView** ‚Äî –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã, **nameField** ‚Äî –¥–ª—è –ø–æ–ª—è ¬´–ò–º—è¬ª, **messageField** ‚Äî –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –∏ **sendButton** ‚Äî –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –¢–∞–∫ –∂–µ –≤—ã–±–µ—Ä–µ–º **TableView** –∏ —Å–æ–∑–¥–∞–¥–∏–º —Å–≤—è–∑–∏ –¥–ª—è **delegate** –∏ **dataSource** –∫–∞–∫ –º—ã –¥–µ–ª–∞–ª–∏ –≤ —É—Ä–æ–∫–µ —Å **–õ–µ–Ω—Ç–æ–π**. –ù–æ —Å–µ–≥–æ–¥–Ω—è –º—ã –¥–æ–±–∞–≤–∏–º –µ—â–µ –æ–¥–∏–Ω –¥–µ–ª–µ–≥–∞—Ç, –∞ –∏–º–µ–Ω–Ω–æ –¥–ª—è –Ω–∞—à–µ–≥–æ **messageField**, –ø–µ—Ä–µ—Ç–∞—â–∏–º –µ–≥–æ —Ç–∞–∫ –∂–µ –∏ –¥–µ–ª–µ–≥–∞—Ç –æ—Ç —Ç–∞–±–ª–∏—Ü—ã. –ù–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–Ω—É —Å–≤—è–∑—å –≤ **Connection Inspector**: —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É. –£ **sendButton** –≤—ã–±–µ—Ä–µ–º **Touch Up Inside** –∏ –ø–µ—Ä–µ—Ç–∞—â–∏–º –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –≤ —Ñ–∞–π–ª–µ, –Ω–∞–∑–æ–≤–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ—Å—Ç–æ **send**.

–ß—Ç–æ–∂ –≤–æ—Ç –º—ã –∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∏ –ø–æ–¥–æ—à–ª–∏ –∫ –≥–ª–∞–≤–Ω–æ–π —á–∞—Å—Ç–∏ —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞. –ú—ã –º–æ–∂–µ–º –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª **ChatViewController** –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω –∏ –ø–æ–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å. –û–±—ä—è–≤–∏–º 3 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

``` swift
private var messages: [Message] = []

private lazy var refreshControl: UIRefreshControl = {
    let refreshControl = UIRefreshControl()
    refreshControl.addTarget(self, action: #selector(reload), for: UIControlEvents.valueChanged)
    return refreshControl
}()
```

–†–∞–∑–±–µ—Ä–µ–º –∏—Ö:
- **messages** ‚Äî –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π, –≤ –Ω–µ–º –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏—à–µ–¥—à–∏–µ –Ω–∞–º —Å —Å–µ—Ä–≤–µ—Ä–∞;
- **refreshControl** ‚Äî –º—ã –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å —ç–∫—Ä–∞–Ω–∞ **FeedViewController**, —Ç–∞–º –∂–µ –º—ã –µ—ë —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏.
–û–¥–Ω–∞–∫–æ –ø–æ—è–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞ –≥–æ–≤–æ—Ä—è—â–∞—è –Ω–∞–º –æ —Ç–æ–º —á—Ç–æ –Ω–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ **reload**.


–ß—Ç–æ –∂ –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –µ—ë. –ü–æ –ª–æ–≥–∏–∫–µ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞ —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π. –¢–∞–∫ –∏ –µ—Å—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –º—ã —É–∂–µ –¥–µ–ª–∞–ª–∏, —è –æ–ø—è—Ç—å —Ç–∞–∫–∏ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –µ–≥–æ, –Ω–æ –ø–æ–º–µ–Ω—è–ª –ø–∞—Ä—É –º–µ—Å—Ç:
- –ø–æ–º–µ–Ω—è–ª—Å—è –∞–¥—Ä–µ—Å –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ **http://triangleye.com/bakh/lessons/swift/s9/messages/**. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –¥–ª—è –í–∞—Å —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π. –ü–æ–ª—å–∑—É–π—Ç–µ—Å—å, —É—á–∏—Ç–µ—Å—å.
- –µ—Å–ª–∏ –≤ **FeedViewController** –º—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–ø–∏—Å–æ–∫ **feeds** –∏ —Ç–∏–ø –±—ã–ª –º–∞—Å—Å–∏–≤ **Feed**, —Ç–æ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –º–∞—Å—Å–∏–≤ **messages**, –∞ —Ç–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Äî **Message**. 
- –Ω—É –∏ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∞–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Ç–∞–±–ª–∏—Ü—ã –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –Ω–∞ **tableView**
- –µ—â–µ –æ–¥–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ. –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ —á—Ç–µ–Ω–∏—è –≤ –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –º—ã –æ–±–Ω–æ–≤–ª—è–µ–º **tableView** —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ **reloadData()** –∏ –∑–∞ —ç—Ç–∏–º –∏–¥–µ—Ç –Ω–æ–≤–∞—è –Ω–µ –∑–Ω–∞–∫–æ–º–∞—è –Ω–∞–º —Å—Ç—Ä–æ–∫–∞. –ú—ã —É **tableView** –≤—ã–∑—ã–≤–∞–µ–º  —Ñ—É–Ω–∫—Ü–∏—é **scrollToRow**, –ø–µ—Ä–µ–≤–µ–¥—É –≤–∞–º –∫–∞–∫ ¬´—Å–∫–æ–ª–ª–∏—Ç—å –∫ —Å—Ç—Ä–æ–∫–µ¬ª. —Å–∫—Ä–æ–ª–ª–∏–º –º—ã –µ–≥–æ –∫ —Å—Ç—Ä–æ–∫–µ (**self.messages.count-1**) —Ç–æ –µ—Å—Ç—å –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–µ –≤ —Ç–∞–±–ª–∏—Ü–µ. **.bottom** ‚Äî –∑–Ω–∞—á–∏—Ç –∫ –∫–∞–∫–æ–π —á–∞—Å—Ç–∏ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ –º—ã –±—É–¥–µ–º —Å–∫—Ä–æ–ª–ª–∏—Ç—å, –º–æ–∂–µ—Ç–µ —Å–∞–º–∏ –ø–æ–∏–≥—Ä–∞—Ç—å—Å—è —Å —ç—Ç–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º. –ù—É –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä **animated** ‚Äî –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–æ —Å–∫—Ä–æ–ª–ª–∏—Ç—å –∏–ª–∏ –Ω–µ—Ç. –Ø –≤—ã–±—Ä–∞–ª –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç. –î–ª—è —á–µ–≥–æ –Ω–∞–º —ç—Ç–æ –Ω–∞–¥–æ? –í—Å—ë –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ —É —Å–µ–±—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∏ –≤—ã –∑–∞–º–µ—Ç–∏—Ç–µ —á—Ç–æ –≤ –ª—é–±–æ–º —Ä–∞–∑–≥–æ–≤–æ—Ä–µ –≤–∞–º –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω–∏–∑—É. –õ–æ–≥–∏—á–Ω–æ —á—Ç–æ —ç—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–µ–ª–∞—é—Ç —Ç–∞–∫ –∂–µ –∏ –ø–µ—Ä–µ–º–∞—Ç—ã–≤–∞—é—Ç –ø–µ—Ä–µ–ø–∏—Å–∫—É –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤–µ–¥—å —Ç–∞–∫ —É–¥–æ–±–Ω–µ–µ –¥–ª—è –≤–∞—Å. 
–í–æ—Ç —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å –≤ –∏—Ç–æ–≥–µ:

``` swift
@objc func reload() {
    DispatchQueue.main.async {
        self.refreshControl.beginRefreshing()
    }
    let url = URL(string: "http://triangleye.com/bakh/lessons/swift/s9/messages/")!
    var request = URLRequest(url: url)
    request.httpMethod = ¬´GET"
    URLSession.shared.dataTask(with: request) {data, response, error in
        DispatchQueue.main.async {
            self.refreshControl.endRefreshing()
        }
        if (error != nil) {
            print("Server error is", error ?? "unknow")
            return
        }
        print("Server returns: ", String(data: data!, encoding: String.Encoding.utf8) ?? "")
        let responseJSON = try? JSONSerialization.jsonObject(with: data!, options: [])
        if let responseJSON = responseJSON as? [Any] {
            print(responseJSON)
            self.messages.removeAll()
            for f in responseJSON {
                self.messages.append(Message(data: f as! [String:Any]))
            }
            DispatchQueue.main.async {
                self.tableView.reloadData()
                self.tableView.scrollToRow(at: IndexPath(row: self.messages.count-1, section: 0), at: .bottom, animated: true)
            }
        } else {
            print("json error")
        }
    }.resume()
}
```

–í —Ñ—É–Ω–∫—Ü–∏—é **viewDidLoad** –¥–æ–±–∞–≤–∏–º —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:
``` swift
tableView.addSubview(refreshControl)
reload()
```
–û–±–µ —Å—Ç—Ä–æ–∫–∏ –º—ã –≤—Å—Ç—Ä–µ—á–∞–µ–º —É–∂–µ –Ω–µ –ø–µ—Ä–≤—ã–π —Ä–∞–∑. –í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ –¥–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, —Ç–æ –µ—Å—Ç—å –Ω–∞—à **refreshController**. –ü—Ä—è–º–æ –∫–∞–∫ –≤ **FeedViewController**. –ê –≤–æ –≤—Ç–æ—Ä–æ–π ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.

–ü–æ—Ä–∞ –±—ã —É–∂–µ –∏ –≤—ã–≤–µ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –Ω–∞–¥–æ **ChatViewController** –æ–±—ä—è–≤–∏—Ç—å **UITableViewDelegate\`–æ–º** –∏ **UITableViewDataSource`–æ–º**. –ü–æ–º–Ω–∏—Ç–µ –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è? –°—Ä–∞–∑—É –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞, —á—Ç–æ–± –µ—ë –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞—à–µ–π —Ç–∞–±–ª–∏—Ü–µ–π:

``` swift
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    return messages.count
}

func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let nibs : Array = Bundle.main.loadNibNamed("MessageItem", owner: self, options: nil)!
    let cell:MessageItem = nibs[0] as! MessageItem
    cell.setMessage(m: messages[indexPath.row])
    return cell
}

func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    view.endEditing(true)
}

func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
    return UITableViewAutomaticDimension
}
```


- –ø–µ—Ä–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞–º —É–∂–µ –∑–Ω–∞–∫–æ–º–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **messages.count**. –¢–æ –µ—Å—Ç—å –∫–æ–ª-–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ.
- –≤—Ç–æ—Ä–∞—è —Ç–∞–∫ –∂–µ –Ω–∞–º –∑–Ω–∞–∫–æ–º–∞, —Ö–æ—Ç—å –∏ –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å—Ç—Ä–∞—à–Ω–æ ‚Äî –æ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞—à–∞ —è—á–µ–π–∫–∞, –∑–∞–≥—Ä—É–∂–∞—è –µ—ë –∏–∑ —Ñ–∞–π–ª–∞ **MessageItem**. –ê –∑–∞–æ–¥–Ω–æ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç, –Ω–∞–ø–∏—Å–∞–Ω–Ω—É—é –Ω–∞–º–∏ —Å–µ–≥–æ–¥–Ω—è —Ñ—É–Ω–∫—Ü–∏—é **setMessage** –≤ —Ñ–∞–π–ª–µ **MessageItem** ‚Äî –Ω–∞–ø–æ–º–Ω—é —á—Ç–æ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã—Å—Ç–∞–≤–∏—Ç –∏–º—è –∞–≤—Ç–æ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –¥–∞—Ç–µ –µ–≥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏.
- —Å–ª–µ–¥—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç, —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –µ—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –Ω–∞ —è—á–µ–π–∫—É —Ç–∞–±–ª–∏—Ü—ã. –í—Å—ë —á—Ç–æ –º—ã —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä–æ–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ë—ã–≤–∞–ª–æ —Ç–∞–∫–æ–µ —É –≤–∞—Å —á—Ç–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –≤ –≤–∞—à–µ–º –ª—é–±–∏–º–æ–º –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ –≤—ã –Ω–∏—á–∞—è–Ω–æ –∫–∞—Å–∞–ª–∏—Å—å –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏ –ø–æ—è–≤–ª—è–ª–∞—Å—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–¥–æ –±—ã–ª–æ —É–±—Ä–∞—Ç—å? –ö –ø—Ä–∏–º–µ—Ä—É –≤ —Ä–∞–Ω–Ω–∏—Ö –≤–µ—Ä—Å–∏—è –≤–∫ –∏ whatsapp –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ —Å–∞–º —á–∞—Ç ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ —É–±–∏—Ä–∞–ª–∞—Å—å, –±—ã–ª–æ –∂—É—Ç–∫–æ –Ω–µ —É–¥–æ–±–Ω–æ. –¢–∞–∫ —á—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–º —ç—Ç–æ —Å—Ä–∞–∑—É –∏ –¥–∞–¥–∏–º –Ω–∞—à–µ–º—É **view** –∫–æ–º–∞–Ω–¥—É –∑–∞–∫–æ–Ω—á–∏—Ç—å
- –ò —Ç–∞–∫ –≤–æ—Ç –º—ã –∏ –ø–æ–¥–æ—à–ª–∏ –∫ —Å–∞–º–æ–π –º–∞–ª–µ–Ω—å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ —Å–∞–º–æ–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –∏ –Ω–µ –∑–Ω–∞–∫–æ–º–æ–π –Ω–∞–º. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–æ–±—â–∞–µ—Ç —Ç–∞–±–ª–∏—Ü–µ –∫–∞–∫–æ–π –≤—ã—Å–æ—Ç—ã –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —è—á–µ–π–∫–∞. –ê —Ç–∞–∫ –∫–∞–∫ —É –Ω–∞—Å —á–∞—Ç, —Ç–æ –∫–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–≤–æ–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏. –ú—ã –∂–µ –≤–∏–¥–∏–º —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω–æ –∏ —Ç–æ–∂–µ ‚Äî **UITableViewAutomaticDimension**. –ö–∞–∫ –∂–µ —Ç–∞–∫? –†–∞–Ω–µ–µ —Å–µ–≥–æ–¥–Ω—è –º—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ —Ñ–∞–π–ª **MessageItem.xib**, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–ø–∏—Å—ã–≤–∞–ª–∏ –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞—à–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —è –≥–æ–≤–æ—Ä–∏–ª —á—Ç–æ –Ω–∞–¥–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –∫ –Ω–∏–∂–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü–µ –∫–∞–∫ –≤ **ScrollView**. –ï—â–µ –ø—Ä–æ—Å–∏–ª –≤–∞—Å –∑–∞–ø–æ–º–Ω–∏—Ç—å —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç. –í–æ—Ç –¥–ª—è —á–µ–≥–æ –º—ã —ç—Ç–æ –¥–µ–ª–∞–ª–∏: —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ –≤ **ScrollView**, —Å–æ–∑–¥–∞–≤–∞—è —ç–ª–µ–º–µ–Ω—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ç–æ—á–Ω–æ –∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –µ–≥–æ –≤—ã—Å–æ—Ç—É ‚Äî –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É, —á—Ç–æ–± –≤—ã—Å–æ—Ç–∞ —è—á–µ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Å—á–∏—Ç—ã–≤–∞–ª–∞—Å—å. –°–Ω—è–ª–∏ —Å —Å–µ–±—è –∫—É—á—É —Ä–∞–±–æ—Ç—ã –æ–¥–Ω–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π. –í–æ—Ç —Ç–∞–∫–æ–π —Ç–æ–Ω–∫–∏–π –º–æ–º–µ–Ω—Ç, –æ –∫–æ—Ç–æ—Ä–æ–º –¥–∞–∂–µ –Ω–µ –≤—Å–µ –ø—Ä–æ—Ñ–∏ –∑–Ω–∞—é—Ç üòé –∏ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∫–∞–∫ —Å—á–∏—Ç–∞—é—Ç –≤ —Ä—É—á–Ω—É—é.


–ú—ã —É–∂–µ –º–æ–∂–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ï—Å–ª–∏ –ø–æ–∏–≥—Ä–∞—Ç—å—Å—è, —Ç–æ –∑–∞–º–µ—Ç–∏–º –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–æ–ª—è –≤–≤–æ–¥–∞ —É–ø–ª—ã–≤–∞—é—Ç –∫–∞–∫ –±—ã ¬´–∑–∞ –Ω–µ—ë¬ª. –ß—Ç–æ –±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ ‚Äî –æ–±—ä—è–≤–∏–º 3 —Ñ—É–Ω–∫—Ü–∏–∏.

``` swift
@objc func scrollToBot(sender: NSNotification) {
    self.tableView.scrollToRow(at: IndexPath(row: self.messages.count-1, section: 0), at: .bottom, animated: true)
}

@objc func keyboardWillShow(sender: NSNotification) {
    let info = sender.userInfo!
    let keyboardFrame: CGRect = (info[UIKeyboardFrameEndUserInfoKey] as! NSValue).cgRectValue
    self.view.frame.size.height = UIScreen.main.bounds.height - keyboardFrame.height + 44
}

@objc func keyboardWillHide(sender: NSNotification) {
    self.view.frame.size.height = UIScreen.main.bounds.height
}
```

- –°–µ–≥–æ–¥–Ω—è —É–∂–µ —Ä–∞—Å—Å–∫–∞–∑–∞–ª –ø–æ—á–µ–º—É —Å–∫–æ–ª–ª–∏–º –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∏–º–µ–Ω–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –∏ –±—É–¥–µ—Ç –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
- –í—Ç–æ—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –ø–æ—è–≤–ª—Å—è—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –ø–æ–ª—É—á–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –≤—ã—Å–æ—Ç—É **self.view.frame** –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ 44 ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –Ω–∏–∂–Ω–µ–≥–æ —Ç–∞–±–±–∞—Ä–∞.
- –¢—Ä–µ—Ç—å—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî –∫–æ–≥–¥–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è. –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ–µ –≤—Å–µ–º—É —ç–∫—Ä–∞–Ω—É.

–î–æ–±–∞–≤–∏–º –≤ —Ñ—É–Ω–∫—Ü–∏—é **viewDidLoad** —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

``` swift
NotificationCenter.default.addObserver(self, selector: #selector(scrollToBot), name: NSNotification.Name.UIKeyboardDidChangeFrame, object: nil)
NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillShow), name: NSNotification.Name.UIKeyboardWillShow, object: nil)
NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillHide), name: NSNotification.Name.UIKeyboardWillHide, object: nil)
```

–ó–¥–µ—Å—å –º—ã –∫–∞—Å–∞–µ–º—Å—è –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞, –∞ –∏–º–µ–Ω–Ω–æ **NotificationCenter**. –í —ç—Ç–æ–º —Ü–µ–Ω—Ç—Ä–µ –º–æ–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å **Observer`–æ–≤** (–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π) –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º—Å—è –Ω–∞ 3 —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏. **UIKeyboardDidChangeFrame** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –≤ —Ä–∞–∑–º–µ—Ä–µ. **UIKeyboardWillShow** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∞ –∏ **UIKeyboardWillHide** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç–∞. –£ —ç—Ç–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, –≤—Å–µ –∏—Ö –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—á–∏—Ç–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —ç–ø–ø–ª, —Ç–∞–∫ –∫–∞–∫ —É –Ω–∞—Å –ø—Ä–æ—Å—Ç–æ –ø–∞–º—è—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –Ω–µ —Ö–≤–∞—Ç–∏—Ç –∏—Ö –≤—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å [https://developer.apple.com/documentation/foundation/nsnotification/name](https://developer.apple.com/documentation/foundation/nsnotification/name). –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± **NSNotification** —Å–º–æ—Ç—Ä–∏—Ç–µ —É –Ω–∞—Å –≤ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–º —É—Ä–æ–∫–µ, —Ç–∞–º –º—ã —Ä–∞—Å—Å–∫–∞–∂–µ–º –ø—Ä–æ—Å—Ç–æ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ.

–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ ‚Äî –Ω–∞—É—á–∏—Ç—å –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç. –î–ª—è —ç—Ç–æ–≥–æ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å —Ç–∏–ø–∞ **POST**. –í —Ñ—É–Ω–∫—Ü–∏–∏ **send**, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–ø–æ–º–Ω—é –º—ã –ø—Ä–∏–≤—è–∑–∞–ª–∏ –∫ **Touch Up Inside** –Ω–∞ –Ω–∞—à–µ–π –∫–Ω–æ–ø–∫–µ, –Ω–∞–ø–∏—à–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

``` swift
view.endEditing(true)
if (nameField.text?.isEmpty)! {
    return
}
if messageField.text.isEmpty {
    return
}
sendButton.isEnabled = false
let url = URL(string: "http://triangleye.com/bakh/lessons/swift/s9/sendMessage/")!
var request = URLRequest(url: url)
request.httpMethod = "POST"
let postString = "name=" + nameField.text! + "&message=" + messageField.text
request.httpBody = postString.data(using: String.Encoding.utf8)
URLSession.shared.dataTask(with: request) {data, response, error in
    DispatchQueue.main.async {
        self.messageField.text = ""
        self.sendButton.isEnabled = true
    }
    self.reload()
}.resume()
```

–ú–Ω–æ–≥–æ–µ –∏–∑ —ç—Ç–æ–≥–æ –º—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏, –Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–±–µ–∂–∏–º—Å—è —á—Ç–æ–±—ã –∑–∞–∫—Ä–µ–ø–∏—Ç—å:
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–æ –µ—Å—Ç—å —Å–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É;
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø—É—Å—Ç–æ—Ç—É –æ–±–∞ –ø–æ–ª—è;
- –í—ã–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É, —á—Ç–æ–± –ø–æ–∫–∞ –∏–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ—Å—ã–ª–∞–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä –æ–¥–Ω–æ –∏ —Ç–æ–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑;
- –ó–∞–¥–∞–µ–º —É—Ä–ª –∫—É–¥–∞ –ø–æ—Å—ã–ª–∞—Ç—å –±—É–¥–µ–º;
- –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∫ –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî **POST**, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã **name** –∏ **message**. –ò –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∞–º –∑–∞–∫–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
- –ö–∞–∫ –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–º –ø–æ–∫–∞ –Ω–µ –≤–∞–∂–µ–Ω ‚Äî –ø—Ä–æ—Å—Ç–æ –æ—á–∏—â–∞–µ–º –ø–æ–ª–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π, —á—Ç–æ–± —É–≤–∏–¥–µ—Ç—å –Ω–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

–°–∞–º–æ —Å–æ–±–æ–π —è –Ω–µ —Å—á–∏—Ç–∞—é —á—Ç–æ –Ω–∞–ø–∏—Å–∞–ª —á–∞—Ç, –∑–∞ 20 –º–∏–Ω—É—Ç —ç—Ç–æ –Ω–µ —Ä–µ–∞–ª—å–Ω–æ. –ü–æ—Å–º–æ—Ç—Ä–∏–º —á—Ç–æ —É –Ω–∞—Å –ø–æ–ª—É—á–∏–ª–æ—Å—å.

![Image1](https://raw.githubusercontent.com/BakhMedia/Swift1.9-PostWall/master/images/1.gif "Image1")


**–°–µ–π—á–∞—Å –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ –ø–∞–º—è—Ç–∏ –≤—Å–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ 2-3 —Ä–∞–∑–∞.**






